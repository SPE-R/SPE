---
title: "Data manipulation with dplyr"
author: 'Damien G.'
date: 'August 2019 - Tartu'
output: beamer_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Tidyverse (from www.tidyverse.org)

**R packages for data science**

The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures. 

![](figs/tidyverse.png)

## code as you speak

Data manipulation with `dplyr` is done using a limitted number of **verbes** corespunding to action to be applied to a table.

- `slice`
- `filter`
- `arrange`
- `select`
- `mutate`
- `group_by`
- `summarize`
- ...


## select rows

```{r eval=FALSE, echo=TRUE}
dat %>% slice(c(1, 1, 1, 2))
```

![](figs/slice.png)

## select columns

```{r eval=FALSE, echo=TRUE}
dat %>% filter(C1 == 'green')
```

![](figs/filter.png)

## arrange rows

```{r eval=FALSE, echo=TRUE}
dat %>% arrange(C1, C2)
```

![](figs/arrange.png)


## columns selection

```{r eval=FALSE, echo=TRUE}
dat %>% select(C1, C2)
```

![](figs/select.png)

## group and summarize data

```{r eval=FALSE, echo=TRUE}
dat %>% group_by(C1) %>% summarize(C4 = mean(C2 + C3))
```

![](figs/group_by.png)

## bind and merge tables

```{r eval=FALSE, echo=TRUE}
dat1 %>% bind_rows(dat2)
```

![](figs/bind_rows.png)

## bind and merge tables

```{r eval=FALSE, echo=TRUE}
dat1 %>% left_join(dat2)
```


![](figs/left_join.png)

**note:** `right_join` will keep all rows of `dat2`

## bind and merge tables

```{r eval=FALSE, echo=TRUE}
dat1 %>% inner_join(dat2)
```


![](figs/inner_join.png)

## bind and merge tables

```{r eval=FALSE, echo=TRUE}
dat1 %>% full_join(dat2)
```

![](figs/full_join.png)
