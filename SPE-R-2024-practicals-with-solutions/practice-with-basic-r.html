<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Practice with basic R | Statistical Practice in Epidemiology with R</title>
  <meta name="description" content="This is the SPE-R 2024 exercises book" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Practice with basic R | Statistical Practice in Epidemiology with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the SPE-R 2024 exercises book" />
  <meta name="github-repo" content="spe-r/spe" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Practice with basic R | Statistical Practice in Epidemiology with R" />
  
  <meta name="twitter:description" content="This is the SPE-R 2024 exercises book" />
  

<meta name="author" content="Krista Fischer" />
<meta name="author" content="Martyn Plummer" />
<meta name="author" content="Janne Pitkäniemi" />
<meta name="author" content="Bendix Carstensen" />
<meta name="author" content="Damien Georges" />
<meta name="author" content="Esa Läärä" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="reading-data-into-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SPE-R practicals</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html"><i class="fa fa-check"></i><b>1</b> Practice with basic R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#the-working-directory"><i class="fa fa-check"></i><b>1.1</b> The working directory</a></li>
<li class="chapter" data-level="1.2" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#the-workspace"><i class="fa fa-check"></i><b>1.2</b> The workspace</a></li>
<li class="chapter" data-level="1.3" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#using-r-as-a-calculator"><i class="fa fa-check"></i><b>1.3</b> Using R as a calculator</a></li>
<li class="chapter" data-level="1.4" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#vectors"><i class="fa fa-check"></i><b>1.4</b> Vectors</a></li>
<li class="chapter" data-level="1.5" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#sequences"><i class="fa fa-check"></i><b>1.5</b> Sequences</a></li>
<li class="chapter" data-level="1.6" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#displaying-and-changing-parts-of-a-vector-indexing"><i class="fa fa-check"></i><b>1.6</b> Displaying and changing parts of a vector (indexing)</a></li>
<li class="chapter" data-level="1.7" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#lists"><i class="fa fa-check"></i><b>1.7</b> Lists</a></li>
<li class="chapter" data-level="1.8" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#data-frames"><i class="fa fa-check"></i><b>1.8</b> Data frames</a></li>
<li class="chapter" data-level="1.9" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#working-with-built-in-data-frames"><i class="fa fa-check"></i><b>1.9</b> Working with built-in data frames</a></li>
<li class="chapter" data-level="1.10" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#referencing-parts-of-the-data-frame-indexing"><i class="fa fa-check"></i><b>1.10</b> Referencing parts of the data frame (indexing)</a></li>
<li class="chapter" data-level="1.11" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#summaries"><i class="fa fa-check"></i><b>1.11</b> Summaries</a></li>
<li class="chapter" data-level="1.12" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#generating-new-variables"><i class="fa fa-check"></i><b>1.12</b> Generating new variables</a></li>
<li class="chapter" data-level="1.13" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#turning-a-variable-into-a-factor"><i class="fa fa-check"></i><b>1.13</b> Turning a variable into a factor</a></li>
<li class="chapter" data-level="1.14" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#frequency-tables"><i class="fa fa-check"></i><b>1.14</b> Frequency tables</a></li>
<li class="chapter" data-level="1.15" data-path="practice-with-basic-r.html"><a href="practice-with-basic-r.html#grouping-the-values-of-a-numeric-variable"><i class="fa fa-check"></i><b>1.15</b> Grouping the values of a numeric variable</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html"><i class="fa fa-check"></i><b>2</b> Reading data into <code>R</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#data-sources"><i class="fa fa-check"></i><b>2.2</b> Data sources</a></li>
<li class="chapter" data-level="2.3" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#data-in-text-files"><i class="fa fa-check"></i><b>2.3</b> Data in text files</a></li>
<li class="chapter" data-level="2.4" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#things-that-can-go-wrong"><i class="fa fa-check"></i><b>2.4</b> Things that can go wrong</a></li>
<li class="chapter" data-level="2.5" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#forgetting-the-headers"><i class="fa fa-check"></i><b>2.5</b> Forgetting the headers</a></li>
<li class="chapter" data-level="2.6" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#using-the-wrong-separator"><i class="fa fa-check"></i><b>2.6</b> Using the wrong separator</a></li>
<li class="chapter" data-level="2.7" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#mis-specifying-the-representation-of-missing-values"><i class="fa fa-check"></i><b>2.7</b> Mis-specifying the representation of missing values</a></li>
<li class="chapter" data-level="2.8" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#spreadsheet-data"><i class="fa fa-check"></i><b>2.8</b> Spreadsheet data</a></li>
<li class="chapter" data-level="2.9" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#reading-data-from-the-internet"><i class="fa fa-check"></i><b>2.9</b> Reading data from the Internet</a></li>
<li class="chapter" data-level="2.10" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#reading-from-the-clipboard"><i class="fa fa-check"></i><b>2.10</b> Reading from the clipboard</a></li>
<li class="chapter" data-level="2.11" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#binary-data"><i class="fa fa-check"></i><b>2.11</b> Binary data</a></li>
<li class="chapter" data-level="2.12" data-path="reading-data-into-r.html"><a href="reading-data-into-r.html#summary"><i class="fa fa-check"></i><b>2.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Data manipulation with <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#the-births-data"><i class="fa fa-check"></i><b>3.2</b> The <code>births</code> data</a></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#tibble-vs-data.frame"><i class="fa fa-check"></i><b>3.3</b> <code>tibble</code> vs <code>data.frame</code></a></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#piping-functions"><i class="fa fa-check"></i><b>3.4</b> Piping functions</a></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#mutate-columns"><i class="fa fa-check"></i><b>3.5</b> <code>mutate</code> columns</a></li>
<li class="chapter" data-level="3.6" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#select-columns-filter-and-arrange-rows"><i class="fa fa-check"></i><b>3.6</b> <code>select</code> columns, <code>filter</code> and <code>arrange</code> rows</a></li>
<li class="chapter" data-level="3.7" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#group_by-and-summarise-data"><i class="fa fa-check"></i><b>3.7</b> <code>group_by</code> and <code>summarise</code> data</a></li>
<li class="chapter" data-level="3.8" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#multiple-grouping"><i class="fa fa-check"></i><b>3.8</b> Multiple grouping</a></li>
<li class="chapter" data-level="3.9" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#bind-and-join-tables"><i class="fa fa-check"></i><b>3.9</b> Bind and join tables</a></li>
<li class="chapter" data-level="3.10" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#data-visualization-with-ggplot2"><i class="fa fa-check"></i><b>3.10</b> Data Visualization with ggplot2</a></li>
<li class="chapter" data-level="3.11" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#pivoting-data-with-tidyr"><i class="fa fa-check"></i><b>3.11</b> pivoting data with tidyr</a></li>
<li class="chapter" data-level="3.12" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#reading-files-with-readr"><i class="fa fa-check"></i><b>3.12</b> reading files with readr</a></li>
<li class="chapter" data-level="3.13" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#string-manipulation-with-stringr"><i class="fa fa-check"></i><b>3.13</b> String manipulation with stringr</a></li>
<li class="chapter" data-level="3.14" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#purrr-package-to-apply-functions-to-list"><i class="fa fa-check"></i><b>3.14</b> purrr package to apply functions to list</a></li>
<li class="chapter" data-level="3.15" data-path="data-manipulation-with-tidyverse.html"><a href="data-manipulation-with-tidyverse.html#bonus-rendering-tables"><i class="fa fa-check"></i><b>3.15</b> Bonus: Rendering tables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tabulation.html"><a href="tabulation.html"><i class="fa fa-check"></i><b>4</b> Tabulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tabulation.html"><a href="tabulation.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="tabulation.html"><a href="tabulation.html#the-births-data-1"><i class="fa fa-check"></i><b>4.2</b> The births data</a></li>
<li class="chapter" data-level="4.3" data-path="tabulation.html"><a href="tabulation.html#one-way-tables"><i class="fa fa-check"></i><b>4.3</b> One-way tables</a></li>
<li class="chapter" data-level="4.4" data-path="tabulation.html"><a href="tabulation.html#improving-the-presentation-of-tables"><i class="fa fa-check"></i><b>4.4</b> Improving the Presentation of Tables</a></li>
<li class="chapter" data-level="4.5" data-path="tabulation.html"><a href="tabulation.html#two-way-tables"><i class="fa fa-check"></i><b>4.5</b> Two-way Tables</a></li>
<li class="chapter" data-level="4.6" data-path="tabulation.html"><a href="tabulation.html#printing"><i class="fa fa-check"></i><b>4.6</b> Printing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics-in-r.html"><a href="graphics-in-r.html"><i class="fa fa-check"></i><b>5</b> Graphics in R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="graphics-in-r.html"><a href="graphics-in-r.html#simple-plot-on-the-screen"><i class="fa fa-check"></i><b>5.1</b> Simple plot on the screen</a></li>
<li class="chapter" data-level="5.2" data-path="graphics-in-r.html"><a href="graphics-in-r.html#colours"><i class="fa fa-check"></i><b>5.2</b> Colours</a></li>
<li class="chapter" data-level="5.3" data-path="graphics-in-r.html"><a href="graphics-in-r.html#adding-to-a-plot"><i class="fa fa-check"></i><b>5.3</b> Adding to a plot</a></li>
<li class="chapter" data-level="5.4" data-path="graphics-in-r.html"><a href="graphics-in-r.html#using-indexing-for-plot-elements"><i class="fa fa-check"></i><b>5.4</b> Using indexing for plot elements</a></li>
<li class="chapter" data-level="5.5" data-path="graphics-in-r.html"><a href="graphics-in-r.html#generating-colours"><i class="fa fa-check"></i><b>5.5</b> Generating colours</a></li>
<li class="chapter" data-level="5.6" data-path="graphics-in-r.html"><a href="graphics-in-r.html#saving-your-graphs-for-use-in-other-documents"><i class="fa fa-check"></i><b>5.6</b> Saving your graphs for use in other documents</a></li>
<li class="chapter" data-level="5.7" data-path="graphics-in-r.html"><a href="graphics-in-r.html#interacting-with-a-plot"><i class="fa fa-check"></i><b>5.7</b> Interacting with a plot</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><i class="fa fa-check"></i><b>6</b> Analysis of hazard rates, their ratios and differences and binary regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#hand-calculations-for-a-single-rate"><i class="fa fa-check"></i><b>6.1</b> Hand calculations for a single rate</a></li>
<li class="chapter" data-level="6.2" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#poisson-model-for-a-single-rate-with-logarithmic-link"><i class="fa fa-check"></i><b>6.2</b> Poisson model for a single rate with logarithmic link</a></li>
<li class="chapter" data-level="6.3" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#poisson-model-for-a-single-rate-with-identity-link"><i class="fa fa-check"></i><b>6.3</b> Poisson model for a single rate with identity link</a></li>
<li class="chapter" data-level="6.4" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#poisson-model-assuming-the-same-rate-for-several-periods"><i class="fa fa-check"></i><b>6.4</b> Poisson model assuming the same rate for several periods</a></li>
<li class="chapter" data-level="6.5" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#analysis-of-rate-ratio"><i class="fa fa-check"></i><b>6.5</b> Analysis of rate ratio</a></li>
<li class="chapter" data-level="6.6" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#analysis-of-rate-difference"><i class="fa fa-check"></i><b>6.6</b> Analysis of rate difference</a></li>
<li class="chapter" data-level="6.7" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#binary-regression"><i class="fa fa-check"></i><b>6.7</b> Binary regression</a></li>
<li class="chapter" data-level="6.8" data-path="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html"><a href="analysis-of-hazard-rates-their-ratios-and-differences-and-binary-regression.html#optionalhomework-hand-calculations-and-calculations-using-matrix-tools"><i class="fa fa-check"></i><b>6.8</b> Optional/Homework: Hand calculations and calculations using matrix tools</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html"><i class="fa fa-check"></i><b>7</b> Estimation of effects: simple and more complex</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#response-and-explanatory-variables"><i class="fa fa-check"></i><b>7.1</b> Response and explanatory variables</a></li>
<li class="chapter" data-level="7.2" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#data-set-births"><i class="fa fa-check"></i><b>7.2</b> Data set <code>births</code></a></li>
<li class="chapter" data-level="7.3" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#simple-estimation-with-lm-and-glm"><i class="fa fa-check"></i><b>7.3</b> Simple estimation with <code>lm()</code> and <code>glm()</code></a></li>
<li class="chapter" data-level="7.4" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#stratified-effects-and-interaction-or-effect-measure-modification"><i class="fa fa-check"></i><b>7.4</b> Stratified effects, and interaction or effect-measure modification</a></li>
<li class="chapter" data-level="7.5" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#controlling-or-adjusting-for-the-effect-of-hyp-for-sex"><i class="fa fa-check"></i><b>7.5</b> Controlling or adjusting for the effect of <code>hyp</code> for <code>sex</code></a></li>
<li class="chapter" data-level="7.6" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#numeric-exposure-simple-linear-regression-and-checking-assumptions"><i class="fa fa-check"></i><b>7.6</b> Numeric exposure, simple linear regression and checking assumptions</a></li>
<li class="chapter" data-level="7.7" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#penalized-spline-model"><i class="fa fa-check"></i><b>7.7</b> Penalized spline model</a></li>
<li class="chapter" data-level="7.8" data-path="estimation-of-effects-simple-and-more-complex.html"><a href="estimation-of-effects-simple-and-more-complex.html#analysis-of-binary-outcomes"><i class="fa fa-check"></i><b>7.8</b> Analysis of binary outcomes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="poisson-regression-analysis-of-curved-effects.html"><a href="poisson-regression-analysis-of-curved-effects.html"><i class="fa fa-check"></i><b>8</b> Poisson regression &amp; analysis of curved effects</a>
<ul>
<li class="chapter" data-level="8.1" data-path="poisson-regression-analysis-of-curved-effects.html"><a href="poisson-regression-analysis-of-curved-effects.html#testis-cancer-data-input-and-housekeeping"><i class="fa fa-check"></i><b>8.1</b> Testis cancer: Data input and housekeeping</a></li>
<li class="chapter" data-level="8.2" data-path="poisson-regression-analysis-of-curved-effects.html"><a href="poisson-regression-analysis-of-curved-effects.html#some-descriptive-analysis"><i class="fa fa-check"></i><b>8.2</b> Some descriptive analysis</a></li>
<li class="chapter" data-level="8.3" data-path="poisson-regression-analysis-of-curved-effects.html"><a href="poisson-regression-analysis-of-curved-effects.html#age-and-period-as-categorical-factors"><i class="fa fa-check"></i><b>8.3</b> Age and period as categorical factors</a></li>
<li class="chapter" data-level="8.4" data-path="poisson-regression-analysis-of-curved-effects.html"><a href="poisson-regression-analysis-of-curved-effects.html#generalized-additive-model-with-penalized-splines"><i class="fa fa-check"></i><b>8.4</b> Generalized additive model with penalized splines</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="causal-inference.html"><a href="causal-inference.html"><i class="fa fa-check"></i><b>9</b> Causal inference</a>
<ul>
<li class="chapter" data-level="9.1" data-path="causal-inference.html"><a href="causal-inference.html#proper-adjustment-for-confounding-in-regression-models"><i class="fa fa-check"></i><b>9.1</b> Proper adjustment for confounding in regression models</a></li>
<li class="chapter" data-level="9.2" data-path="causal-inference.html"><a href="causal-inference.html#dag-tools-in-the-package-dagitty"><i class="fa fa-check"></i><b>9.2</b> DAG tools in the package <code>dagitty</code></a></li>
<li class="chapter" data-level="9.3" data-path="causal-inference.html"><a href="causal-inference.html#identifying-the-true-dag-for-the-data"><i class="fa fa-check"></i><b>9.3</b> Identifying the true DAG for the data</a></li>
<li class="chapter" data-level="9.4" data-path="causal-inference.html"><a href="causal-inference.html#instrumental-variables-estimation-mendelian-randomization"><i class="fa fa-check"></i><b>9.4</b> Instrumental variables estimation: Mendelian randomization</a></li>
<li class="chapter" data-level="9.5" data-path="causal-inference.html"><a href="causal-inference.html#why-are-simulation-exercises-useful-for-causal-inference"><i class="fa fa-check"></i><b>9.5</b> Why are simulation exercises useful for causal inference?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>10</b> Graphics with ggplot2</a>
<ul>
<li class="chapter" data-level="10.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#data"><i class="fa fa-check"></i><b>10.1</b> Data</a></li>
<li class="chapter" data-level="10.2" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#building-the-plot"><i class="fa fa-check"></i><b>10.2</b> Building the plot</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#the-ggplot2-package"><i class="fa fa-check"></i><b>10.2.1</b> The ggplot2 package</a></li>
<li class="chapter" data-level="10.2.2" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#geometries"><i class="fa fa-check"></i><b>10.2.2</b> Geometries</a></li>
<li class="chapter" data-level="10.2.3" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#scales"><i class="fa fa-check"></i><b>10.2.3</b> Scales</a></li>
<li class="chapter" data-level="10.2.4" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>10.2.4</b> Themes</a></li>
<li class="chapter" data-level="10.2.5" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#putting-everything-together"><i class="fa fa-check"></i><b>10.2.5</b> Putting everything together</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#self-study"><i class="fa fa-check"></i><b>10.3</b> Self study</a></li>
<li class="chapter" data-level="10.4" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#adding-the-table-advanced-topic"><i class="fa fa-check"></i><b>10.4</b> Adding the table (advanced topic)</a></li>
<li class="chapter" data-level="10.5" data-path="graphics-with-ggplot2.html"><a href="graphics-with-ggplot2.html#references"><i class="fa fa-check"></i><b>10.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html"><i class="fa fa-check"></i><b>11</b> Survival analysis with competing risks: Oral cancer patients</a>
<ul>
<li class="chapter" data-level="11.1" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#description-of-the-data"><i class="fa fa-check"></i><b>11.1</b> Description of the data</a></li>
<li class="chapter" data-level="11.2" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#loading-the-packages-and-the-data"><i class="fa fa-check"></i><b>11.2</b> Loading the packages and the data</a></li>
<li class="chapter" data-level="11.3" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#total-mortality-kaplanmeier-analyses"><i class="fa fa-check"></i><b>11.3</b> Total mortality: Kaplan–Meier analyses</a></li>
<li class="chapter" data-level="11.4" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#total-mortality-by-stage"><i class="fa fa-check"></i><b>11.4</b> Total mortality by stage</a></li>
<li class="chapter" data-level="11.5" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#event-specific-cumulative-mortality-curves"><i class="fa fa-check"></i><b>11.5</b> Event-specific cumulative mortality curves</a></li>
<li class="chapter" data-level="11.6" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#regression-modelling-of-overall-mortality."><i class="fa fa-check"></i><b>11.6</b> Regression modelling of overall mortality.</a></li>
<li class="chapter" data-level="11.7" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#modelling-event-specific-hazards"><i class="fa fa-check"></i><b>11.7</b> Modelling event-specific hazards</a></li>
<li class="chapter" data-level="11.8" data-path="survival-analysis-with-competing-risks-oral-cancer-patients.html"><a href="survival-analysis-with-competing-risks-oral-cancer-patients.html#lexis-object-with-multi-state-set-up"><i class="fa fa-check"></i><b>11.8</b> Lexis object with multi-state set-up</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time-splitting-time-scales-and-smr.html"><a href="time-splitting-time-scales-and-smr.html"><i class="fa fa-check"></i><b>12</b> Time-splitting, time-scales and SMR</a>
<ul>
<li class="chapter" data-level="12.1" data-path="time-splitting-time-scales-and-smr.html"><a href="time-splitting-time-scales-and-smr.html#age-specific-mortality"><i class="fa fa-check"></i><b>12.1</b> Age-specific mortality</a></li>
<li class="chapter" data-level="12.2" data-path="time-splitting-time-scales-and-smr.html"><a href="time-splitting-time-scales-and-smr.html#smr"><i class="fa fa-check"></i><b>12.2</b> SMR</a></li>
<li class="chapter" data-level="12.3" data-path="time-splitting-time-scales-and-smr.html"><a href="time-splitting-time-scales-and-smr.html#smr-modeling"><i class="fa fa-check"></i><b>12.3</b> SMR modeling</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><i class="fa fa-check"></i><b>13</b> Nested case-control study and case-cohort study: Risk factors of coronary heart disease</a>
<ul>
<li class="chapter" data-level="13.1" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#reading-the-cohort-data-illustrating-the-study-base-and-risk-sets"><i class="fa fa-check"></i><b>13.1</b> Reading the cohort data, illustrating the study base and risk sets</a></li>
<li class="chapter" data-level="13.2" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#nested-case-control-study"><i class="fa fa-check"></i><b>13.2</b> Nested case-control study</a></li>
<li class="chapter" data-level="13.3" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#case-cohort-study"><i class="fa fa-check"></i><b>13.3</b> Case-cohort study</a></li>
<li class="chapter" data-level="13.4" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#do-these-estimates-resemble-those-obtained-from-nested-case-control-data"><i class="fa fa-check"></i><b>13.4</b> Do these estimates resemble those obtained from nested case-control data?</a></li>
<li class="chapter" data-level="13.5" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#full-cohort-analysis-and-comparisons"><i class="fa fa-check"></i><b>13.5</b> Full cohort analysis and comparisons</a></li>
<li class="chapter" data-level="13.6" data-path="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html"><a href="nested-case-control-study-and-case-cohort-study-risk-factors-of-coronary-heart-disease.html#further-exercises-and-homework"><i class="fa fa-check"></i><b>13.6</b> Further exercises and homework</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html"><i class="fa fa-check"></i><b>14</b> Causal inference 2: Model-based estimation of causal estimands</a>
<ul>
<li class="chapter" data-level="14.1" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#introduction-3"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#control-of-confounding"><i class="fa fa-check"></i><b>14.2</b> Control of confounding</a></li>
<li class="chapter" data-level="14.3" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#generation-of-target-population-and-true-models"><i class="fa fa-check"></i><b>14.3</b> Generation of target population and true models</a></li>
<li class="chapter" data-level="14.4" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#factual-and-counterfactual-risks---associational-and-causal-contrasts"><i class="fa fa-check"></i><b>14.4</b> Factual and counterfactual risks - associational and causal contrasts</a></li>
<li class="chapter" data-level="14.5" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#outcome-modelling-and-estimation-of-causal-contrasts-by-g-formula"><i class="fa fa-check"></i><b>14.5</b> Outcome modelling and estimation of causal contrasts by g-formula</a></li>
<li class="chapter" data-level="14.6" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#inverse-probability-weighting-ipw-by-propensity-scores"><i class="fa fa-check"></i><b>14.6</b> Inverse probability weighting (IPW) by propensity scores</a></li>
<li class="chapter" data-level="14.7" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#improving-ipw-estimation-and-using-r-package-psweight"><i class="fa fa-check"></i><b>14.7</b> Improving IPW estimation and using R package <code>PSweight</code></a></li>
<li class="chapter" data-level="14.8" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#effect-of-exposure-among-those-exposed"><i class="fa fa-check"></i><b>14.8</b> Effect of exposure among those exposed</a></li>
<li class="chapter" data-level="14.9" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#double-robust-estimation-by-augmented-ipw"><i class="fa fa-check"></i><b>14.9</b> Double robust estimation by augmented IPW</a></li>
<li class="chapter" data-level="14.10" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#double-robust-targeted-maximum-likelihood-estimation-tmle"><i class="fa fa-check"></i><b>14.10</b> Double robust, targeted maximum likelihood estimation (TMLE)</a></li>
<li class="chapter" data-level="14.11" data-path="causal-inference-2-model-based-estimation-of-causal-estimands.html"><a href="causal-inference-2-model-based-estimation-of-causal-estimands.html#double-robust-estimation-with-aipw-and-tmle-packages"><i class="fa fa-check"></i><b>14.11</b> Double robust estimation with <code>AIPW</code> and <code>tmle</code> packages</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="time-dependent-variables-and-multiple-states.html"><a href="time-dependent-variables-and-multiple-states.html"><i class="fa fa-check"></i><b>15</b> Time-dependent variables and multiple states</a>
<ul>
<li class="chapter" data-level="15.1" data-path="time-dependent-variables-and-multiple-states.html"><a href="time-dependent-variables-and-multiple-states.html#the-renal-failure-dataset"><i class="fa fa-check"></i><b>15.1</b> The renal failure dataset</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/SPE-R/SPE" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Practice in Epidemiology with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="practice-with-basic-r" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Practice with basic R<a href="practice-with-basic-r.html#practice-with-basic-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The main purpose of this session is to give participants who have not
had much (or any) experience with using <code>R</code> a chance to
practice the basics and to ask questions. For others, it should serve
as a reminder of some of the basic features of the language.</p>
<p>R can be installed on all major platforms (<em>i.e.</em> Windows, macOS,
Linux). We do not assume in this exercise that you are using any
particular platform. Many people like to use the RStudio graphical
user interface (GUI), which gives the same look and feel across all
platforms.</p>
<div id="the-working-directory" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> The working directory<a href="practice-with-basic-r.html#the-working-directory" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A key concept in <code>R</code> is the <em>working directory</em> (or <em>folder</em>
in the terminology of Windows). The working directory is
where <code>R</code> looks for data files that you may want to read in and
where <code>R</code> will write out any files you create. It is a good
idea to keep separate working directories for different projects. In
this course we recommend that you keep a separate working directory
for each exercise.</p>
<p>If you are working on the command line in a terminal, then you can
change to the correct working directory and then launch <code>R</code> by
typing <em>R</em>.</p>
<p>If you are using a GUI then you will typically need to change to the
correct working directory after starting <code>R</code>. In RStudio, you
can change directory from the <em>Session</em> menu. However it is much
more useful to create a new <em>project</em> to keep your source files
and data. When you open a project in the RStudio GUI, your working
directory is automatically changed to the directory associated with
the project.</p>
<p>You can display the current working directory with the <code>getwd()</code>
(<em>get working directory</em>) function and set it with the <code>setwd()</code>
(<em>set working directory</em>) function. The function <code>dir()</code> can be
used to see what files you have in the working directory.</p>
</div>
<div id="the-workspace" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> The workspace<a href="practice-with-basic-r.html#the-workspace" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can quit <code>R</code> by typing</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="practice-with-basic-r.html#cb1-1" tabindex="-1"></a><span class="fu">q</span>()</span></code></pre></div>
<p>at the <code>R</code> command prompt. You will be asked if you want to
save your workspace. We strongly recommend that you answer <em>no</em> to this
question. If you answer <em>yes</em> then R will write a file named
<code>.RData</code> into the working directory containing all the objects
you created during your session. This file will be automatically loaded
the next time you start <code>R</code> and this will restore all the objects
in your workspace.</p>
<p>It may seem convenient to keep your R objects from one session to another.
But this has many disadvantages.</p>
<ul>
<li>You may not remember how an object was created. This becomes a
problem if you need to redo your analysis after the data has been
changed or updated, or if you accidentally delete the object.</li>
<li>An object might be modified or overwritten. In this case your
analysis will give you a different answer but you will not know why.
You may not even notice that the answer has changed.</li>
<li>It becomes impossible to clean your workspace if you cannot
remember which objects are required by which analyses. As a result,
your workspace will become cluttered with old objects.</li>
</ul>
<p>We strongly recommend that you follow some basic principles of
reproducible research.</p>
<ul>
<li>Always start with a clean (empty) workspace.</li>
<li>Read in the data you need from a pristine source.</li>
<li>Put your R commands in a script file so that they can be run
again in a future session.</li>
<li>All modifications to the data that you need to make should be
done in R using a script and not by editing the data source. This
way, if the original data is modified or updated then you can run
the script again on the updated data.</li>
</ul>
</div>
<div id="using-r-as-a-calculator" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Using R as a calculator<a href="practice-with-basic-r.html#using-r-as-a-calculator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Try using R as an interactive calculator by typing different
arithmetic expressions on the command line. Pressing the return key
on the command line finishes the expression. R will then evaluate the
expression and print out the result.</p>
<p>Note that R allows you to recall previous commands using the vertical
arrow key. You can edit a recalled command and then resubmit it by
pressing the return key. Keeping that in mind, try the following:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="practice-with-basic-r.html#cb2-1" tabindex="-1"></a><span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span></span>
<span id="cb2-2"><a href="practice-with-basic-r.html#cb2-2" tabindex="-1"></a>(<span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span>) <span class="sc">*</span> <span class="dv">5</span></span>
<span id="cb2-3"><a href="practice-with-basic-r.html#cb2-3" tabindex="-1"></a><span class="fu">sqrt</span>((<span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span>) <span class="sc">*</span> <span class="dv">5</span>) <span class="co"># square root</span></span>
<span id="cb2-4"><a href="practice-with-basic-r.html#cb2-4" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sqrt</span>((<span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span>) <span class="sc">*</span> <span class="dv">5</span>), <span class="dv">2</span>) <span class="co"># round to two decimal places</span></span></code></pre></div>
<p>The hash symbol <code>#</code> denotes the start of a <em>comment</em>.
Anything after the hash is ignored by R.</p>
<p>Round braces are used a lot in R. In the above expressions, they are
used in two different ways. Firstly, they can be used to establish the
order of operations. In the example</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="practice-with-basic-r.html#cb3-1" tabindex="-1"></a>(<span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span>) <span class="sc">*</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 140</code></pre>
<p>they ensure that 12 is added to 16 before the result is multiplied by 5.
If you omit the braces then you get a different answer</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="practice-with-basic-r.html#cb5-1" tabindex="-1"></a><span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span> <span class="sc">*</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 92</code></pre>
<p>because multiplication has higher <em>precedence</em> than addition. The
second use of round braces is in a function call (e.g. <code>sqrt</code>,
<code>round</code>). To call a function in R, type the name followed by the
arguments inside round braces. Some functions take multiple arguments,
and in this case they are separated by commas.</p>
<p>You can see that complicated expressions in R can have several levels
of nested braces. To keep track of these, it helps to use a
syntax-highlighting editor. For example, in RStudio, when you type an
opening bracket <code>(</code>, RStudio will automatically add a closing
bracket <code>)</code>, and when the cursor moves past a closing bracket,
RStudio will automatically highlight the corresponding opening
bracket. Features like this can make it much easier to write R code
free from syntax errors.</p>
<p>Instead of printing the result to the screen, you can store it in an object, say</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="practice-with-basic-r.html#cb7-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">sqrt</span>((<span class="dv">12</span> <span class="sc">+</span> <span class="dv">16</span>) <span class="sc">*</span> <span class="dv">5</span>), <span class="dv">2</span>)</span></code></pre></div>
<p>In this case <code>R</code> does not print anything to the screen. You can
see the results of the calculation, stored in the object <code>a</code>,
by typing <code>a</code> and also use <code>a</code> for further calculations,
e.g:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="practice-with-basic-r.html#cb8-1" tabindex="-1"></a><span class="fu">exp</span>(a)</span>
<span id="cb8-2"><a href="practice-with-basic-r.html#cb8-2" tabindex="-1"></a><span class="fu">log</span>(a) <span class="co"># natural logarithm</span></span>
<span id="cb8-3"><a href="practice-with-basic-r.html#cb8-3" tabindex="-1"></a><span class="fu">log10</span>(a) <span class="co"># log to the base 10</span></span></code></pre></div>
<p>The left arrow expression <code>&lt;-</code>, pronounced <em>gets</em>, is called
the assignment operator, and is obtained by typing <code>&lt;</code> followed
by <code>-</code> (with no space in between). It is also possible to use
the equals sign <code>=</code> for assignment.</p>
<p>Note that object names in R are case sensitive. So you can assign
different values to objects named <code>A</code> and <code>a</code>.</p>
</div>
<div id="vectors" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Vectors<a href="practice-with-basic-r.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All commands in R are <em>functions</em> which act on <em>objects</em>. One
important kind of object is a <em>vector</em>, which is an ordered
collection of numbers, or character strings (e.g. <em>Charles Darwin</em>),
or logical values (<code>TRUE</code> or <code>FALSE</code>). The components of a
vector must be of the same type (numeric, character, or logical). The
combine function <code>c()</code>, together with the assignment operator, is
used to create vectors. Thus</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="practice-with-basic-r.html#cb9-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="fl">2.2</span>)</span></code></pre></div>
<p>creates a vector <code>v</code> with components 4, 6, 1, 2.2 and assigns the
result to the vector <code>v</code>.</p>
<p>A key feature of the R language is that many operations are <em>vectorized</em>,
meaning that you can carry out the same operation on
each element of a vector in a single operation. Try</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="practice-with-basic-r.html#cb10-1" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>## [1] 4.0 6.0 1.0 2.2</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="practice-with-basic-r.html#cb12-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> v</span></code></pre></div>
<pre><code>## [1] 7.0 9.0 4.0 5.2</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="practice-with-basic-r.html#cb14-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> v</span></code></pre></div>
<pre><code>## [1] 12.0 18.0  3.0  6.6</code></pre>
<p>and you will see that R understands what to do in each case.</p>
<p>R extends ordinary arithmetic with the concept of a <em>missing value</em>
represented by the symbol <code>NA</code> (<em>Not Available</em>). Any
operation on a missing value creates another missing value. You can
see this by repeating the same operations on a vector containing a
missing value:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="practice-with-basic-r.html#cb16-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="cn">NA</span>)</span>
<span id="cb16-2"><a href="practice-with-basic-r.html#cb16-2" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> v</span></code></pre></div>
<pre><code>## [1]  7  9 NA</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="practice-with-basic-r.html#cb18-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> v</span></code></pre></div>
<pre><code>## [1] 12 18 NA</code></pre>
<p>The fact that every operation on a missing value produces a missing value
can be a nuisance when you want to create a summary statistic for a vector:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="practice-with-basic-r.html#cb20-1" tabindex="-1"></a><span class="fu">mean</span>(v)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>While it is true that the mean of <code>v</code> is unknown because the value
of the third element is missing, we normally want the mean of the
non-missing elements. Fortunately the <code>mean</code> function has an
optional argument called <code>na.rm</code> which can be used for this.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="practice-with-basic-r.html#cb22-1" tabindex="-1"></a><span class="fu">mean</span>(v, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>Many functions in R have optional arguments that can be omitted, in which
case they take their default value (For example, the <code>mean</code> function has
default <code>na.rm=FALSE</code>). You can explicitly values to optional arguments
in the function call to override the default behaviour.</p>
<p>You can get a description of the structure of any object using the
function <code>str()</code>. For example, <code>str(v)</code> shows that <code>v</code>
is numeric with 4 components. If you just want to know the length of a
vector then it is much easier to use the <code>length</code> function.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="practice-with-basic-r.html#cb24-1" tabindex="-1"></a><span class="fu">length</span>(v)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="sequences" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Sequences<a href="practice-with-basic-r.html#sequences" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are short-cut functions for creating vectors with a regular
structure. For example, if you want a vector containing the sequence of
integers from 1 to 10, you can use</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="practice-with-basic-r.html#cb26-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>The <code>seq()</code> function allows the creation of more general
sequences. For example, the vector (15, 20, 25, … ,85) can be created
with</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="practice-with-basic-r.html#cb28-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">15</span>, <span class="at">to =</span> <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 15 20 25 30 35 40 45 50 55 60 65 70 75 80 85</code></pre>
<p>The objects created by the <code>:</code> operator and the <code>seq()</code> function
are ordinary vectors, and can be combined with other vectors using the
combine function:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="practice-with-basic-r.html#cb30-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">5</span>, <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">20</span>, <span class="at">to =</span> <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">5</span>))</span></code></pre></div>
<pre><code>##  [1]  5 20 25 30 35 40 45 50 55 60 65 70 75 80 85</code></pre>
<p>You can learn more about functions by typing <code>?</code> followed by the
function name. For example <code>?seq</code> gives information about the
syntax and usage of the function <code>seq()</code>.</p>
<ol style="list-style-type: decimal">
<li><p>Create a vector <code>w</code> with components 1, -1, 2, -2</p></li>
<li><p>Display this vector</p></li>
</ol>
<pre><code>## [1]  1 -1  2 -2</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Obtain a description of <code>w</code> using <code>str()</code></li>
</ol>
<pre><code>##  num [1:4] 1 -1 2 -2</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Create the vector <code>w+1</code>, and display it.</li>
</ol>
<pre><code>## [1]  2  0  3 -1</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Create the vector <code>v</code> with components (5, 10, 15, … , 75) using seq().</li>
</ol>
<pre><code>##  [1]  5 10 15 20 25 30 35 40 45 50 55 60 65 70 75</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Now add the components 0 and 1 to the beginning of <code>v</code> using c().</li>
</ol>
<pre><code>##  [1]  0  1  5 10 15 20 25 30 35 40 45 50 55 60 65 70 75</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Find the length of this vector.</li>
</ol>
<pre><code>## [1] 17</code></pre>
</div>
<div id="displaying-and-changing-parts-of-a-vector-indexing" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Displaying and changing parts of a vector (indexing)<a href="practice-with-basic-r.html#displaying-and-changing-parts-of-a-vector-indexing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Square brackets in R are used to extract parts of vectors. So
<code>x[1]</code> gives the first element of vector <code>x</code>. Since R is
vectorized you can also supply a vector of integer index values inside
the square brackets. Any expression that creates an integer vector
will work.</p>
<p>Try the following commands:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="practice-with-basic-r.html#cb38-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">23</span>, <span class="dv">11</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">0</span>)</span>
<span id="cb38-2"><a href="practice-with-basic-r.html#cb38-2" tabindex="-1"></a>x[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="practice-with-basic-r.html#cb40-1" tabindex="-1"></a>x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1]  0  9 10</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="practice-with-basic-r.html#cb42-1" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>)]</span></code></pre></div>
<pre><code>## [1]  2 10  4</code></pre>
<p>Trying to extract an element that is beyond the end of the vector is,
surprisingly, not an error. Instead, this returns a missing value</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="practice-with-basic-r.html#cb44-1" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb44-2"><a href="practice-with-basic-r.html#cb44-2" tabindex="-1"></a>x[N <span class="sc">+</span> <span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>There is a reason for this behaviour, which we will discuss in the recap.</p>
<p><code>R</code> also allows <em>logical subscripting</em>. Try the following</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="practice-with-basic-r.html#cb46-1" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="practice-with-basic-r.html#cb48-1" tabindex="-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">10</span>]</span></code></pre></div>
<pre><code>## [1] 23 11</code></pre>
<p>The first expression creates a logical vector of the same length as
<code>x</code>, where each element has the value <code>TRUE</code> or
<code>FALSE</code> depending on whether or not the corresponding element
of <code>x</code> is greater than 10. If you supply a logical vector as an
index, <code>R</code> selects only those elements for which the conditions is
<code>TRUE</code>.</p>
<p>You can combine two logical vectors with the operators <code>&amp;</code>
(logical and) and <code>|</code> (logical or). For example, to select
elements of x that are between 10 and 20 we combine two one-sided logical
conditions for <span class="math inline">\(x \geq 10\)</span> <em>and</em> <span class="math inline">\(x \leq 20\)</span>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="practice-with-basic-r.html#cb50-1" tabindex="-1"></a>x[x <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">20</span>]</span></code></pre></div>
<pre><code>## [1] 10 11</code></pre>
<p>The remaining elements of <code>x</code> that are <em>either</em> less than 10
<em>or</em> greater than 20 are selected with</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="practice-with-basic-r.html#cb52-1" tabindex="-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">20</span>]</span></code></pre></div>
<pre><code>##  [1]  2  7  0  9 23  4  7  8  6  0</code></pre>
<p>Indexing can also be used to replace parts of a vector:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="practice-with-basic-r.html#cb54-1" tabindex="-1"></a>x[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb54-2"><a href="practice-with-basic-r.html#cb54-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 1000    7    0    9   10   23   11    4    7    8    6    0</code></pre>
<p>This replaces the first element of <code>x</code>. Logical subscripting is
useful for replacing parts of a vector that satisfy a certain condition.
For example to replace all elements that take the value 0 with the value 1:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="practice-with-basic-r.html#cb56-1" tabindex="-1"></a>x[x <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb56-2"><a href="practice-with-basic-r.html#cb56-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 1000    7    1    9   10   23   11    4    7    8    6    1</code></pre>
<p>If you want to replace parts of a vector then you need to make sure
that the replacement value is either a single value, as in the example
above, or a vector equal in length to the number of elements to be
replaced. For example, to replace elements 2, 3, and 4 we need to
supply a vector of replacement values of length 3.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="practice-with-basic-r.html#cb58-1" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">8</span>, <span class="dv">1</span>)</span>
<span id="cb58-2"><a href="practice-with-basic-r.html#cb58-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 1000    0    8    1   10   23   11    4    7    8    6    1</code></pre>
<p>It is important to remember this when you are using logical
subscripting because the number of elements to be replaced is not
given explicitly in the R code, and it is easy to get confused about
how many values need to be replaced. If we want to add 3 to every
element that is less than 3 then we can break the operation down into
3 steps:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="practice-with-basic-r.html#cb60-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[x <span class="sc">&lt;</span> <span class="dv">3</span>]</span>
<span id="cb60-2"><a href="practice-with-basic-r.html#cb60-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">+</span> <span class="dv">3</span></span>
<span id="cb60-3"><a href="practice-with-basic-r.html#cb60-3" tabindex="-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">3</span>] <span class="ot">&lt;-</span> y</span>
<span id="cb60-4"><a href="practice-with-basic-r.html#cb60-4" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 1000    3    8    4   10   23   11    4    7    8    6    4</code></pre>
<p>First we extract the values to be modified, then we modify them, then we
write back the modified values to the original positions. R experts will
normally do this in a single expression.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="practice-with-basic-r.html#cb62-1" tabindex="-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">3</span>] <span class="ot">&lt;-</span> x[x <span class="sc">&lt;</span> <span class="dv">3</span>] <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<p>Remember, if you are confused by a complicated expression you can usually
break it down into simpler steps.</p>
<p>If you want to create an entirely new vector based on some logical
condition then use the <code>ifelse()</code> function. This function takes
three arguments: the first is a logical vector; the second is the
value taken by elements of the logical vector that are <code>TRUE</code>; and
the third is the value taken by elements that are <code>FALSE</code>.</p>
<p>In this example, we use the remainder operator <code>%%</code> to identify
elements of <code>x</code> that have value 0 when divided by 2 (i.e. the even numbers)
and then create a new character vector with the labels <em>even</em> and <em>odd</em>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="practice-with-basic-r.html#cb63-1" tabindex="-1"></a>x <span class="sc">%%</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>##  [1] 0 1 0 0 0 1 1 0 1 0 0 0</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="practice-with-basic-r.html#cb65-1" tabindex="-1"></a><span class="fu">ifelse</span>(x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;even&quot;</span>, <span class="st">&quot;odd&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;even&quot; &quot;even&quot; &quot;odd&quot;  &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot;
## [11] &quot;even&quot; &quot;even&quot;</code></pre>
<p>Now try the following:</p>
<ol style="list-style-type: decimal">
<li>Display elements that are less than 10, but greater than 4</li>
<li>Modify the vector x, replacing by 10 all values that are greater than 10</li>
<li>Modify the vector x, multiplying by 2 all elements that are smaller than 5 (Remember you can do this in steps).</li>
</ol>
</div>
<div id="lists" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Lists<a href="practice-with-basic-r.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Collections of components of different types are called <em>lists</em>,
and are created with the <code>list()</code> function. Thus</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="practice-with-basic-r.html#cb67-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="st">&quot;name of company&quot;</span>)</span>
<span id="cb67-2"><a href="practice-with-basic-r.html#cb67-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>## [[1]]
## [1] 4
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] &quot;name of company&quot;</code></pre>
<p>creates a list with 3 components: the first is numeric, the second
is logical and the third is character. A list element can be any
object, including another list. This flexibility means that functions
that need to return a lot of complex information, such as statistical
modelling functions, often return a list.</p>
<p>As with vectors, single square brackets are used to take a subset of a
list, but the result will always be another list, even if you select
only one element</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="practice-with-basic-r.html#cb69-1" tabindex="-1"></a>m[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># A list containing first two elements of m</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] 4
## 
## [[2]]
## [1] TRUE</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="practice-with-basic-r.html#cb71-1" tabindex="-1"></a>m[<span class="dv">3</span>] <span class="co"># A list containing the third element of m</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;name of company&quot;</code></pre>
<p>If you just want to extract a single element of a list then you must use
double square braces:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="practice-with-basic-r.html#cb73-1" tabindex="-1"></a>m[[<span class="dv">3</span>]] <span class="co"># Extract third element</span></span></code></pre></div>
<pre><code>## [1] &quot;name of company&quot;</code></pre>
<p>Lists are more useful when their elements are named. You can name an element
by using the syntax <code>name=value</code> in the call to the <code>list</code> function:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="practice-with-basic-r.html#cb75-1" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb75-2"><a href="practice-with-basic-r.html#cb75-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Ann&quot;</span>, <span class="st">&quot;Jack&quot;</span>, <span class="st">&quot;Tom&quot;</span>),</span>
<span id="cb75-3"><a href="practice-with-basic-r.html#cb75-3" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">50</span>, <span class="dv">27</span>, <span class="dv">42</span>)</span>
<span id="cb75-4"><a href="practice-with-basic-r.html#cb75-4" tabindex="-1"></a>)</span>
<span id="cb75-5"><a href="practice-with-basic-r.html#cb75-5" tabindex="-1"></a>mylist</span></code></pre></div>
<pre><code>## $name
## [1] &quot;Joe&quot;  &quot;Ann&quot;  &quot;Jack&quot; &quot;Tom&quot; 
## 
## $age
## [1] 34 50 27 42</code></pre>
<p>This creates a new list with the elements <em>name</em>, a character
vector of names, and <em>age</em> a numeric vector of ages. The components
of the list can be extracted with a dollar sign <code>$</code></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="practice-with-basic-r.html#cb77-1" tabindex="-1"></a>mylist<span class="sc">$</span>name</span></code></pre></div>
<pre><code>## [1] &quot;Joe&quot;  &quot;Ann&quot;  &quot;Jack&quot; &quot;Tom&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="practice-with-basic-r.html#cb79-1" tabindex="-1"></a>mylist<span class="sc">$</span>age</span></code></pre></div>
<pre><code>## [1] 34 50 27 42</code></pre>
</div>
<div id="data-frames" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Data frames<a href="practice-with-basic-r.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data frames are a special structure used when we want to store several vectors of the
same length, and corresponding elements of each vector refer to the same record.
For example, here we create a simple data frame containing the names of some individuals
along with their age in years, their sex (coded 1 or 2) and their height in cm.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="practice-with-basic-r.html#cb81-1" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb81-2"><a href="practice-with-basic-r.html#cb81-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Ann&quot;</span>, <span class="st">&quot;Jack&quot;</span>, <span class="st">&quot;Tom&quot;</span>),</span>
<span id="cb81-3"><a href="practice-with-basic-r.html#cb81-3" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">50</span>, <span class="dv">27</span>, <span class="dv">42</span>), </span>
<span id="cb81-4"><a href="practice-with-basic-r.html#cb81-4" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb81-5"><a href="practice-with-basic-r.html#cb81-5" tabindex="-1"></a>  <span class="at">height =</span> <span class="fu">c</span>(<span class="dv">185</span>, <span class="dv">170</span>, <span class="dv">175</span>, <span class="dv">182</span>)</span>
<span id="cb81-6"><a href="practice-with-basic-r.html#cb81-6" tabindex="-1"></a>)</span></code></pre></div>
<p>The construction of a data frame is just like a named list (except
that we use the constructor function <code>data.frame</code> instead of <code>list</code>). In fact data frames are also lists so, for example, you can
extract vectors using the dollar sign:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="practice-with-basic-r.html#cb82-1" tabindex="-1"></a>mydata<span class="sc">$</span>height</span></code></pre></div>
<pre><code>## [1] 185 170 175 182</code></pre>
<p>On the other hand, data frames are also two dimensional objects:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="practice-with-basic-r.html#cb84-1" tabindex="-1"></a>mydata</span></code></pre></div>
<pre><code>##   name age sex height
## 1  Joe  34   1    185
## 2  Ann  50   2    170
## 3 Jack  27   1    175
## 4  Tom  42   1    182</code></pre>
<p>When you print a data frame, each variable appears in a separate
column. You can use square brackets with two comma-separated
arguments to take subsets of rows or columns.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="practice-with-basic-r.html#cb86-1" tabindex="-1"></a>mydata[<span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>##   name age sex height
## 1  Joe  34   1    185</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="practice-with-basic-r.html#cb88-1" tabindex="-1"></a>mydata[, <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;height&quot;</span>)]</span></code></pre></div>
<pre><code>##   age height
## 1  34    185
## 2  50    170
## 3  27    175
## 4  42    182</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="practice-with-basic-r.html#cb90-1" tabindex="-1"></a>mydata[<span class="dv">2</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 170</code></pre>
<p>We will look into indexing of data frames in more detail below.</p>
<p>Now let’s create another data frame with more individuals than the
first one:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="practice-with-basic-r.html#cb92-1" tabindex="-1"></a>yourdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb92-2"><a href="practice-with-basic-r.html#cb92-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Ann&quot;</span>, <span class="st">&quot;Peter&quot;</span>, <span class="st">&quot;Sue&quot;</span>, <span class="st">&quot;Jack&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb92-3"><a href="practice-with-basic-r.html#cb92-3" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fu">c</span>(<span class="dv">67</span>, <span class="dv">81</span>, <span class="dv">56</span>, <span class="dv">90</span>, <span class="dv">72</span>, <span class="dv">79</span>, <span class="dv">69</span>)</span>
<span id="cb92-4"><a href="practice-with-basic-r.html#cb92-4" tabindex="-1"></a>)</span></code></pre></div>
<p>This new data frame contains the weights of the individuals. The two
data sets can be joined together with the <code>merge</code> function.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="practice-with-basic-r.html#cb93-1" tabindex="-1"></a>newdata <span class="ot">&lt;-</span> <span class="fu">merge</span>(mydata, yourdata)</span>
<span id="cb93-2"><a href="practice-with-basic-r.html#cb93-2" tabindex="-1"></a>newdata</span></code></pre></div>
<pre><code>##   name age sex height weight
## 1  Ann  50   2    170     67
## 2 Jack  27   1    175     90
## 3  Joe  34   1    185     79
## 4  Tom  42   1    182     72</code></pre>
<p>The <code>merge</code> function uses the variables common to both data
frames – in this case the variable <em>name</em> – to uniquely identify
each row. By default, only rows that are in both data frames are
preserved, the rest are discarded. In the above example, the records
for Peter, Sue, and Jane, which are not in <code>mydata</code> are
discarded. If you want to keep them, use the optional argument <code>all=TRUE</code>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="practice-with-basic-r.html#cb95-1" tabindex="-1"></a>newdata <span class="ot">&lt;-</span> <span class="fu">merge</span>(mydata, yourdata, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb95-2"><a href="practice-with-basic-r.html#cb95-2" tabindex="-1"></a>newdata</span></code></pre></div>
<pre><code>##    name age sex height weight
## 1   Ann  50   2    170     67
## 2  Jack  27   1    175     90
## 3  Jane  NA  NA     NA     69
## 4   Joe  34   1    185     79
## 5 Peter  NA  NA     NA     81
## 6   Sue  NA  NA     NA     56
## 7   Tom  42   1    182     72</code></pre>
<p>This keeps a row for all individuals but since Peter, Sue and Jane
have no recorded age, height, or sex these are missing values.</p>
</div>
<div id="working-with-built-in-data-frames" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> Working with built-in data frames<a href="practice-with-basic-r.html#working-with-built-in-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We shall use the births data which concern 500 mothers who had
singleton births (i.e. no twins) in a large London hospital. The
outcome of interest is the birth weight of the baby, also dichotomised
as normal or low birth weight. These data are available in the <a href="https://cran.r-project.org/web/packages/Epi/index.html">Epi</a>
package:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="practice-with-basic-r.html#cb97-1" tabindex="-1"></a><span class="fu">library</span>(Epi)</span>
<span id="cb97-2"><a href="practice-with-basic-r.html#cb97-2" tabindex="-1"></a><span class="fu">data</span>(births)</span>
<span id="cb97-3"><a href="practice-with-basic-r.html#cb97-3" tabindex="-1"></a><span class="fu">objects</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;births&quot;   &quot;m&quot;        &quot;mydata&quot;   &quot;mylist&quot;   &quot;N&quot;        &quot;newdata&quot; 
##  [7] &quot;v&quot;        &quot;w&quot;        &quot;x&quot;        &quot;y&quot;        &quot;yourdata&quot;</code></pre>
<p>The function <code>objects()</code> shows what is in your workspace. To
find out a bit more about <code>births</code> try</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="practice-with-basic-r.html#cb99-1" tabindex="-1"></a><span class="fu">help</span>(births)</span></code></pre></div>
<p>The dataframe <code>"diet"</code> in the Epi package contains data from a follow-up study with
coronary heart disease as the end-point.</p>
<ol style="list-style-type: decimal">
<li>Load these data with</li>
</ol>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="practice-with-basic-r.html#cb100-1" tabindex="-1"></a><span class="fu">data</span>(diet)</span></code></pre></div>
<p>and print the contents of the data frame to the screen..
2. Check that you now have two objects, <code>births</code>, and <code>diet</code> in your workspace.
3. Get help on the object <code>diet</code>.
4. Remove the object <code>diet</code> with the command</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="practice-with-basic-r.html#cb101-1" tabindex="-1"></a><span class="fu">remove</span>(diet)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Check that the object <code>diet</code> is no longer in your workspace.</li>
</ol>
</div>
<div id="referencing-parts-of-the-data-frame-indexing" class="section level2 hasAnchor" number="1.10">
<h2><span class="header-section-number">1.10</span> Referencing parts of the data frame (indexing)<a href="practice-with-basic-r.html#referencing-parts-of-the-data-frame-indexing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Typing <code>births</code> will list the entire data frame – not usually
very helpful. You can use the <code>head</code> function to see just the
first few rows of a data frame</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="practice-with-basic-r.html#cb102-1" tabindex="-1"></a><span class="fu">head</span>(births)</span></code></pre></div>
<pre><code>##   id bweight lowbw gestwks preterm matage hyp sex
## 1  1    2974     0   38.52       0     34   0   2
## 2  2    3270     0      NA      NA     30   0   1
## 3  3    2620     0   38.15       0     35   0   2
## 4  4    3751     0   39.80       0     31   0   1
## 5  5    3200     0   38.89       0     33   1   1
## 6  6    3673     0   40.97       0     33   0   2</code></pre>
<p>Now try</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="practice-with-basic-r.html#cb104-1" tabindex="-1"></a>births[<span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>##   id bweight lowbw gestwks preterm matage hyp sex
## 1  1    2974     0   38.52       0     34   0   2</code></pre>
<p>This will list all the values for the first row. Similarly,</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="practice-with-basic-r.html#cb106-1" tabindex="-1"></a>births[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>##   id bweight lowbw gestwks preterm matage hyp sex
## 2  2    3270     0      NA      NA     30   0   1</code></pre>
<p>will list the value taken by the second row, and so on.
To list the data for the first 10 subjects, try</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="practice-with-basic-r.html#cb108-1" tabindex="-1"></a>births[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##    id bweight lowbw gestwks preterm matage hyp sex
## 1   1    2974     0   38.52       0     34   0   2
## 2   2    3270     0      NA      NA     30   0   1
## 3   3    2620     0   38.15       0     35   0   2
## 4   4    3751     0   39.80       0     31   0   1
## 5   5    3200     0   38.89       0     33   1   1
## 6   6    3673     0   40.97       0     33   0   2
## 7   7    3628     0   42.14       0     29   0   2
## 8   8    3773     0   40.21       0     37   0   1
## 9   9    3960     0   42.03       0     36   0   2
## 10 10    3405     0   39.33       0     39   0   1</code></pre>
<p>Often we want to extract rows of a data frame based on a condition.
To select all subjects with height less than 180 cm from the
data frame <code>mydata</code> we can use the <code>subset()</code> function.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="practice-with-basic-r.html#cb110-1" tabindex="-1"></a><span class="fu">subset</span>(mydata, height <span class="sc">&lt;</span> <span class="dv">180</span>)</span></code></pre></div>
<pre><code>##   name age sex height
## 2  Ann  50   2    170
## 3 Jack  27   1    175</code></pre>
</div>
<div id="summaries" class="section level2 hasAnchor" number="1.11">
<h2><span class="header-section-number">1.11</span> Summaries<a href="practice-with-basic-r.html#summaries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A good way to start an analysis is to ask for a
summary of the data by typing</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="practice-with-basic-r.html#cb112-1" tabindex="-1"></a><span class="fu">summary</span>(births)</span></code></pre></div>
<pre><code>##        id           bweight         lowbw         gestwks         preterm      
##  Min.   :  1.0   Min.   : 628   Min.   :0.00   Min.   :24.69   Min.   :0.0000  
##  1st Qu.:125.8   1st Qu.:2862   1st Qu.:0.00   1st Qu.:37.94   1st Qu.:0.0000  
##  Median :250.5   Median :3188   Median :0.00   Median :39.12   Median :0.0000  
##  Mean   :250.5   Mean   :3137   Mean   :0.12   Mean   :38.72   Mean   :0.1286  
##  3rd Qu.:375.2   3rd Qu.:3551   3rd Qu.:0.00   3rd Qu.:40.09   3rd Qu.:0.0000  
##  Max.   :500.0   Max.   :4553   Max.   :1.00   Max.   :43.16   Max.   :1.0000  
##                                                NA&#39;s   :10      NA&#39;s   :10      
##      matage           hyp             sex       
##  Min.   :23.00   Min.   :0.000   Min.   :1.000  
##  1st Qu.:31.00   1st Qu.:0.000   1st Qu.:1.000  
##  Median :34.00   Median :0.000   Median :1.000  
##  Mean   :34.03   Mean   :0.144   Mean   :1.472  
##  3rd Qu.:37.00   3rd Qu.:0.000   3rd Qu.:2.000  
##  Max.   :43.00   Max.   :1.000   Max.   :2.000  
## </code></pre>
<p>This prints some summary statistics (minimum, lower quartile, mean, median,
upper quartile, maximum). For variables with missing values, the number
of <code>NA</code>s is also printed.</p>
<p>To see the names of the variables in the data frame try</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="practice-with-basic-r.html#cb114-1" tabindex="-1"></a><span class="fu">names</span>(births)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;      &quot;bweight&quot; &quot;lowbw&quot;   &quot;gestwks&quot; &quot;preterm&quot; &quot;matage&quot;  &quot;hyp&quot;    
## [8] &quot;sex&quot;</code></pre>
<p>Variables in a data frame can be referred to by name, but to do so
it is necessary also to specify the name of the data frame. Thus
<code>births$hyp</code> refers to the variable <code>hyp</code> in the <code>births</code>
data frame, and typing <code>births$hyp</code> will print the data on this
variable. To summarize the variable <code>hyp</code> try</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="practice-with-basic-r.html#cb116-1" tabindex="-1"></a><span class="fu">summary</span>(births<span class="sc">$</span>hyp)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.144   0.000   1.000</code></pre>
<p>Alternatively you can use</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="practice-with-basic-r.html#cb118-1" tabindex="-1"></a><span class="fu">with</span>(births, <span class="fu">summary</span>(hyp))</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.144   0.000   1.000</code></pre>
</div>
<div id="generating-new-variables" class="section level2 hasAnchor" number="1.12">
<h2><span class="header-section-number">1.12</span> Generating new variables<a href="practice-with-basic-r.html#generating-new-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>New variables can be produced using assignment together with the usual
mathematical operations and functions. For example</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="practice-with-basic-r.html#cb120-1" tabindex="-1"></a>logbw <span class="ot">&lt;-</span> <span class="fu">log</span>(births<span class="sc">$</span>bweight)</span></code></pre></div>
<p>produces the variable <code>logbw</code> in your workspace, while</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="practice-with-basic-r.html#cb121-1" tabindex="-1"></a>births<span class="sc">$</span>logbw <span class="ot">&lt;-</span> <span class="fu">log</span>(births<span class="sc">$</span>bweight)</span></code></pre></div>
<p>produces the variable <code>logbw</code> in the <code>births</code> data frame.</p>
<p>You can also replace existing variables. For example <code>bweight</code> measures
birth weight in grams. To convert the units to kilograms we replace the
original variable with a new one:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="practice-with-basic-r.html#cb122-1" tabindex="-1"></a>births<span class="sc">$</span>bweight <span class="ot">&lt;-</span> births<span class="sc">$</span>bweight <span class="sc">/</span> <span class="dv">1000</span></span></code></pre></div>
</div>
<div id="turning-a-variable-into-a-factor" class="section level2 hasAnchor" number="1.13">
<h2><span class="header-section-number">1.13</span> Turning a variable into a factor<a href="practice-with-basic-r.html#turning-a-variable-into-a-factor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R categorical variables are known as <em>factors</em>, and the
different categories are called the <em>levels</em> of the factor.
Variables such as <code>hyp</code> and <code>sex</code> are originally coded using
integer codes, and by default R will interpret these codes as numeric
values taken by the variables. Factors will become very important
later in the course when we study modelling functions, where
factors and numeric variables are treated very differently. For the moment,
you can think of factors as <em>value labels</em> that are more informative
than numeric codes.</p>
<p>For R to recognize that the codes refer to categories it is necessary
to convert the variables to be factors, and to label the levels. To
convert the variable <code>hyp</code> to be a factor, try</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="practice-with-basic-r.html#cb123-1" tabindex="-1"></a>births<span class="sc">$</span>hyp <span class="ot">&lt;-</span> <span class="fu">factor</span>(births<span class="sc">$</span>hyp, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;normal&quot;</span>, <span class="st">&quot;hyper&quot;</span>))</span></code></pre></div>
<p>This takes the original numeric codes (0, 1) and replaces them with
informative labels <em>normal’’ and ``hyper</em> for normal blood pressure
and hypertension, respectively.</p>
<ol style="list-style-type: decimal">
<li>Convert the variable <code>sex</code> into a factor
with labels <code>"M"</code> and <code>"F"</code> for values 1 and 2, respectively</li>
</ol>
</div>
<div id="frequency-tables" class="section level2 hasAnchor" number="1.14">
<h2><span class="header-section-number">1.14</span> Frequency tables<a href="practice-with-basic-r.html#frequency-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When starting to look at any new data frame the first step is to check
that the values of the variables make sense and correspond to the
codes defined in the coding schedule. For categorical variables
(factors) this can be done by looking at one-way frequency tables and
checking that only the specified codes (levels) occur. The most
useful function for making simple frequency tables is <code>table</code>.
The distribution of the factor <code>hyp</code> can be viewed using</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="practice-with-basic-r.html#cb124-1" tabindex="-1"></a><span class="fu">with</span>(births, <span class="fu">table</span>(hyp))</span></code></pre></div>
<pre><code>## hyp
## normal  hyper 
##    428     72</code></pre>
<p>or by specifying the data frame as in</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="practice-with-basic-r.html#cb126-1" tabindex="-1"></a><span class="fu">table</span>(births<span class="sc">$</span>hyp)</span></code></pre></div>
<pre><code>## 
## normal  hyper 
##    428     72</code></pre>
<p>For simple expressions the choice is a matter of taste, but <code>with</code>
is shorter for more complicated expressions.</p>
<ol style="list-style-type: decimal">
<li>Find the frequency distribution of <code>sex</code>.</li>
</ol>
<pre><code>## 
##   M   F 
## 264 236</code></pre>
<pre><code>## sex
##   M   F 
## 264 236</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>If you give two or more arguments to the <code>table</code> function
then it produces cross-tabulations. Find the two-way frequency
distribution of <code>sex</code> and <code>hyp</code>.</li>
</ol>
<pre><code>##    hyp
## sex normal hyper
##   M    221    43
##   F    207    29</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Create a logical variable called <code>early</code> according to whether <code>gestwks</code>
is less than 30 or not. Make a frequency table of <code>early</code>.</li>
</ol>
<pre><code>## early
## FALSE  TRUE 
##   485     5</code></pre>
</div>
<div id="grouping-the-values-of-a-numeric-variable" class="section level2 hasAnchor" number="1.15">
<h2><span class="header-section-number">1.15</span> Grouping the values of a numeric variable<a href="practice-with-basic-r.html#grouping-the-values-of-a-numeric-variable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For a numeric variable like <code>matage</code> it is often useful
to group the values and to create a new factor which codes the groups.
For example we might cut the values taken by <code>matage</code> into the
groups 20–29, 30–34, 35–39, 40–44, and then create a factor called
<code>agegrp</code> with 4 levels corresponding to the four groups. The best way of doing this is
with the function <code>cut</code>. Try</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="practice-with-basic-r.html#cb132-1" tabindex="-1"></a>births<span class="sc">$</span>agegrp <span class="ot">&lt;-</span> </span>
<span id="cb132-2"><a href="practice-with-basic-r.html#cb132-2" tabindex="-1"></a>  <span class="fu">cut</span>(</span>
<span id="cb132-3"><a href="practice-with-basic-r.html#cb132-3" tabindex="-1"></a>    births<span class="sc">$</span>matage, </span>
<span id="cb132-4"><a href="practice-with-basic-r.html#cb132-4" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>), </span>
<span id="cb132-5"><a href="practice-with-basic-r.html#cb132-5" tabindex="-1"></a>    <span class="at">right =</span> <span class="cn">FALSE</span></span>
<span id="cb132-6"><a href="practice-with-basic-r.html#cb132-6" tabindex="-1"></a>  )</span>
<span id="cb132-7"><a href="practice-with-basic-r.html#cb132-7" tabindex="-1"></a><span class="fu">with</span>(births, <span class="fu">table</span>(agegrp))</span></code></pre></div>
<pre><code>## agegrp
## [20,30) [30,35) [35,40) [40,45) 
##      70     200     194      36</code></pre>
<p>By default the factor levels are labelled <code>[20-25)</code>,
<code>[25-30)</code>, etc., where <code>[20-25)</code> refers to the interval
which includes the left hand end (20) but not the right hand end
(25). This is the reason for <code>right=FALSE</code>. When <code>right=TRUE</code>
(which is the default) the intervals include the right hand end but
not the left hand.</p>
<p>Observations which are not inside the range specified by the <code>breaks</code>
argument result in missing values for the new factor. Hence it
is important that the first element in <code>breaks</code> is smaller than the
smallest value in your data, and the last element is larger than the
largest value.</p>
<ol style="list-style-type: decimal">
<li>Summarize the numeric variable <code>gestwks</code>, which records the
length of gestation for the baby, and make a note of the range of
values.</li>
</ol>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   24.69   37.94   39.12   38.72   40.09   43.16      10</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create a new factor <code>gest4</code> which cuts <code>gestwks</code> at 20,
35, 37, 39, and 45 weeks, including the left hand end, but not the
right hand. Make a table of the frequencies for the four levels of <code>gest4</code>.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reading-data-into-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/SPE-R/SPE/edit/master/pracs-book/basic-s.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SPE-R-2024-practicals-with-solutions.pdf", "SPE-R-2024-practicals-with-solutions.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
